(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{111:function(t,e,n){t.exports=n(144)},116:function(t,e,n){},117:function(t,e,n){},144:function(t,e,n){"use strict";n.r(e),n.d(e,"history",(function(){return Ft}));var a=n(0),r=n.n(a),c=n(9),i=n.n(c);n(116),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,l=n(34),u=(n(117),n(187)),s=n(188),d=n(189),f=n(148),m=n(147),O=n(190),T=n(191),E=n(7),S=n(64),b=n(84),I=n.n(b).a.create(Object(E.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"89e8e364-2267-45f8-866b-f315992878e1"}})),p=function(t,e){return I.put("todo-lists/".concat(t),{title:e})},j=function(t){return I.delete("todo-lists/".concat(t))},g=function(t){return I.post("todo-lists",{title:t})},h=function(){return I.get("todo-lists")},_=function(t){return I.post("auth/login",t)},A=function(){return I.delete("auth/login")},v=function(){return I.get("auth/me")},D=function(t,e){t.messages.length?e(K(t.messages[0])):e(K("Some error occurred")),e(R("failed"))},L=function(t,e){e(K(t.message)),e(R("failed"))};!function(t){t.SET_IS_LOGGED_IN="AUTH/SET-IS-LOGGED-IN"}(o||(o={}));var y,C={isLoggedIn:!1},k=function(t){return{type:o.SET_IS_LOGGED_IN,value:t}};!function(t){t.SET_STATUS="APP/SET-STATUS",t.SET_ERROR="APP/SET-ERROR",t.SET_IS_INITIALIZED="APP/SET_IS_INITIALIZED"}(y||(y={}));var N,w={status:"idle",error:null,isInitialized:!1},R=function(t){return{type:y.SET_STATUS,status:t}},K=function(t){return{type:y.SET_ERROR,error:t}},G=function(){return function(t){v().then((function(e){var n;0===e.data.resultCode?t(k(!0)):D(e.data,t),t((n=!0,{type:y.SET_IS_INITIALIZED,isInitialized:n}))})).catch((function(e){L(e,t)}))}};!function(t){t.REMOVE_TODOLIST="TODOLISTS/REMOVE-TODOLIST",t.ADD_TODOLIST="TODOLISTS/ADD-TODOLIST",t.CHANGE_TODOLIST_TITLE="TODOLISTS/CHANGE-TODOLIST-TITLE",t.CHANGE_TODOLIST_FILTER="TODOLISTS/CHANGE-TODOLIST-FILTER",t.SET_TODOLISTS="TODOLISTS/REDSET_TODOLISTS",t.CHANGE_TODOLIST_ENTITY_STATUS="APP/CHANGE-TODOLIST-ENTITY-STATUS"}(N||(N={}));var P,U,H=[],M=function(t,e){return{type:N.CHANGE_TODOLIST_FILTER,id:t,filter:e}},F=function(){return function(t){t(R("loading")),h().then((function(e){var n;t((n=e.data,{type:N.SET_TODOLISTS,todolists:n})),t(R("succeeded"))}))}},V=function(t){return function(e){e(R("loading")),e(function(t,e){return{type:N.CHANGE_TODOLIST_ENTITY_STATUS,id:t,entityStatus:e}}(t,"loading")),j(t).then((function(n){0===n.data.resultCode?(e(function(t){return{type:N.REMOVE_TODOLIST,id:t}}(t)),e(R("succeeded"))):D(n.data,e)})).catch((function(t){L(t,e)}))}},x=function(t){return function(e){e(R("loading")),g(t).then((function(t){var n;0===t.data.resultCode?e((n=t.data.data.item,{type:N.ADD_TODOLIST,todolist:n})):D(t.data,e)})).catch((function(t){L(t,e)}))}},Y=function(t,e){return function(n){n(R("loading")),p(t,e).then((function(a){0===a.data.resultCode?(n(function(t,e){return{type:N.CHANGE_TODOLIST_TITLE,id:t,title:e}}(t,e)),n(R("succeeded"))):D(a.data,n)})).catch((function(t){L(t,n)}))}},Z=n(13),z=n(184),q=n(194),B=n(146),J=n(46),W=n(192),X=n(180),$=n(181),Q=r.a.memo((function(t){var e=Object(a.useState)(""),n=Object(J.a)(e,2),c=n[0],i=n[1],o=Object(a.useState)(null),l=Object(J.a)(o,2),u=l[0],s=l[1],d=function(){""!==c.trim()?(t.addItem(c),i("")):s("Field is required")};return r.a.createElement("div",null,r.a.createElement(W.a,{variant:"outlined",size:"small",label:"Title",value:c,onChange:function(t){i(t.currentTarget.value)},onKeyPress:function(t){null!==u&&s(null),t.ctrlKey&&"Enter"===t.key&&d()},helperText:u,error:!!u,disabled:t.disabled}),r.a.createElement(X.a,{onClick:d,color:"primary",disabled:t.disabled},r.a.createElement($.a,null)))})),tt=r.a.memo((function(t){var e=Object(a.useState)(!1),n=Object(J.a)(e,2),c=n[0],i=n[1],o=Object(a.useState)(t.title),l=Object(J.a)(o,2),u=l[0],s=l[1];return c?r.a.createElement(W.a,{value:u,onChange:function(t){return s(t.currentTarget.value)},onBlur:function(){i(!1),t.onChange(u)},autoFocus:!0}):r.a.createElement("span",{onDoubleClick:function(){t.disabled||i(!0)}}," ",t.title," ")})),et=n(183),nt=n(182),at=n(96),rt=n(31);!function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(P||(P={})),function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(U||(U={}));var ct,it=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return I.get("todo-lists/".concat(t,"/tasks?count=").concat(e,"&page=").concat(n))},ot=function(t,e){return I.post("todo-lists/".concat(t,"/tasks"),{title:e})},lt=function(t,e){return I.delete("todo-lists/".concat(t,"/tasks/").concat(e))},ut=function(t,e,n){return I.put("todo-lists/".concat(t,"/tasks/").concat(e),n)};!function(t){t.REMOVE_TASK="TASKS/REMOVE-TASK",t.ADD_TASK="TASKS/ADD-TASK",t.UPDATE_TASK="TASKS/CHANGE-STATUS-TASK",t.SET_TASKS="TASKS/SET-TASKS",t.CHANGE_TASK_ENTITY_STATUS="APP/CHANGE-TASK-ENTITY-STATUS"}(ct||(ct={}));var st={},dt=function(t,e,n){return{type:ct.CHANGE_TASK_ENTITY_STATUS,id:t,status:e,todolistId:n}},ft=function(t){return function(e){e(R("loading")),it(t).then((function(n){e(function(t,e){return{type:ct.SET_TASKS,tasks:t,todolistId:e}}(n.data.items,t)),e(R("succeeded"))})).catch((function(t){L(t,e)}))}},mt=function(t,e){return function(n){n(R("loading")),ot(t,e).then((function(t){var e;0===t.data.resultCode?(n((e=t.data.data.item,{type:ct.ADD_TASK,task:e})),n(R("succeeded"))):D(t.data,n)})).catch((function(t){L(t,n)}))}},Ot=function(t,e){return function(n){n(R("loading")),n(dt(e,"loading",t)),lt(t,e).then((function(a){var r,c;0===a.data.resultCode?(n((r=t,c=e,{type:ct.REMOVE_TASK,taskID:c,todoListID:r})),n(R("succeeded"))):D(a.data,n)})).catch((function(t){L(t,n)}))}},Tt=function(t,e,n){return function(a,r){var c=r().tasks[t].find((function(t){return t.id===e}));c&&(a(R("loading")),a(dt(e,"loading",t)),ut(t,e,Object(E.a)({title:c.title,status:c.status,startDate:c.startDate,priority:c.priority,description:c.description,deadline:c.deadline},n)).then((function(r){0===r.data.resultCode?(a(function(t,e,n){return{type:ct.UPDATE_TASK,domainModel:e,taskID:t,todoListID:n}}(e,n,t)),a(R("succeeded")),a(dt(e,"idle",t))):D(r.data,a)})).catch((function(t){L(t,a)})))}},Et=n(196),St=r.a.memo((function(t){var e=t.task,n=t.todolistId,c=t.disabled,i=Object(Z.b)(),o=Object(a.useCallback)((function(t){i(Tt(n,e.id,{title:t}))}),[]);return r.a.createElement("li",{key:e.id,className:e.status===U.Completed?"is-done":""},r.a.createElement(Et.a,{checked:e.status===U.Completed,color:"primary",onChange:function(t){i(Tt(n,e.id,{status:t.currentTarget.checked?U.Completed:U.New}))},disabled:c||"loading"===e.entityStatus}),r.a.createElement(tt,{title:e.title,onChange:o,disabled:c||"loading"===e.entityStatus}),r.a.createElement(X.a,{onClick:function(){i(Ot(n,e.id))},disabled:c||"loading"===e.entityStatus},r.a.createElement(nt.a,null)))})),bt=r.a.memo((function(t){var e=t.demo,n=void 0!==e&&e,c=Object(l.a)(t,["demo"]);Object(a.useEffect)((function(){n||i(ft(c.id))}),[]);var i=Object(Z.b)(),o=Object(Z.c)((function(t){return t.todolists.filter((function(t){return t.id===c.id}))[0]})),u=Object(Z.c)((function(t){return t.tasks[c.id]})),s=It(u,o.filter),d=Object(a.useCallback)((function(t){i(mt(o.id,t))}),[]),f=Object(a.useCallback)((function(){return i(M(o.id,"all"))}),[]),O=Object(a.useCallback)((function(){return i(M(o.id,"active"))}),[]),T=Object(a.useCallback)((function(){return i(M(o.id,"completed"))}),[]),E=Object(a.useCallback)((function(t){return i(Y(o.id,t))}),[]);return r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(tt,{title:o.title,onChange:E,disabled:"loading"===o.entityStatus}),r.a.createElement(X.a,{onClick:function(){i(V(o.id))},disabled:"loading"===o.entityStatus},r.a.createElement(nt.a,null))),r.a.createElement(Q,{addItem:d,disabled:"loading"===o.entityStatus}),r.a.createElement("ul",{style:{listStyleType:"none",paddingLeft:"0"}},s.map((function(t){return r.a.createElement(St,{key:t.id,task:t,todolistId:o.id,disabled:"loading"===o.entityStatus})}))),r.a.createElement("div",null,r.a.createElement(et.a,null,r.a.createElement(m.a,{variant:"all"===o.filter?"contained":"text",color:"default",onClick:f,className:"all"===o.filter?"active-filter":""},"All"),r.a.createElement(m.a,{variant:"active"===o.filter?"contained":"text",color:"primary",onClick:O,className:"active"===o.filter?"active-filter":""},"Active"),r.a.createElement(m.a,{variant:"completed"===o.filter?"contained":"text",color:"secondary",onClick:T,className:"completed"===o.filter?"active-filter":""},"Completed"))))})),It=function(t,e){return"completed"===e?t.filter((function(t){return t.status=U.Completed})):"active"===e?t.filter((function(t){return t.status=U.New})):t},pt=n(14),jt=function(t){var e=t.demo,n=void 0!==e&&e;Object(l.a)(t,["demo"]);Object(a.useEffect)((function(){!n&&i&&c(F())}),[]);var c=Object(Z.b)(),i=Object(Z.c)((function(t){return t.auth.isLoggedIn})),o=Object(Z.c)((function(t){return t.todolists})),u=Object(a.useCallback)((function(t){c(x(t))}),[]);return i?r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{container:!0},r.a.createElement(q.a,{p:2,pl:0},r.a.createElement(Q,{addItem:u}))),r.a.createElement(z.a,{container:!0,spacing:3},o.map((function(t){return r.a.createElement(z.a,{item:!0,key:t.id},r.a.createElement(B.a,null,r.a.createElement(q.a,{p:2},r.a.createElement(bt,{key:t.id,id:t.id,demo:n}))))})))):r.a.createElement(pt.a,{to:"/login"})},gt=n(198),ht=n(195);function _t(t){return r.a.createElement(ht.a,Object.assign({elevation:6,variant:"filled"},t))}function At(){var t=Object(Z.b)(),e=Object(Z.c)((function(t){return t.app.error})),n=function(e,n){"clickaway"!==n&&t(K(null))},a=null!==e;return r.a.createElement(gt.a,{open:a,autoHideDuration:6e3,onClose:n},r.a.createElement(_t,{onClose:n,severity:"error"},e))}var vt=n(199),Dt=n(179),Lt=n(185),yt=n(186),Ct=n(95),kt=function(){var t=Object(Z.b)(),e=Object(Z.c)((function(t){return t.auth.isLoggedIn})),n=Object(Ct.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?t.password.length<=3&&(e.password="Must be more characters than 3"):e.password="Required",e},onSubmit:function(e){var a;t((a=Object(E.a)({},e),function(t){t(R("loading")),_(a).then((function(e){0===e.data.resultCode?(t(k(!0)),t(R("succeeded"))):D(e.data,t)})).catch((function(e){L(e,t)}))})),n.resetForm()}});return e?r.a.createElement(pt.a,{to:"/"}):r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xs:4},r.a.createElement("form",{onSubmit:n.handleSubmit},r.a.createElement(vt.a,null,r.a.createElement(Dt.a,null,r.a.createElement("p",null,"To log in get registered",r.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),r.a.createElement("p",null,"or use common test account credentials:"),r.a.createElement("p",null,"Email: free@samuraijs.com"),r.a.createElement("p",null,"Password: free")),r.a.createElement(Lt.a,null,r.a.createElement(W.a,Object.assign({label:"Email",margin:"normal"},n.getFieldProps("email"))),n.touched.email&&n.errors.email?r.a.createElement("div",{style:{color:"red"}},n.errors.email):null,r.a.createElement(W.a,Object.assign({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.touched.password&&n.errors.password?r.a.createElement("div",{style:{color:"red"}},n.errors.password):null,r.a.createElement(yt.a,{label:"Remember me",control:r.a.createElement(Et.a,n.getFieldProps("rememberMe"))}),r.a.createElement(m.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},Nt=function(t){var e=t.demo,n=void 0!==e&&e,c=(Object(l.a)(t,["demo"]),Object(Z.b)()),i=Object(Z.c)((function(t){return t.app.status})),o=Object(Z.c)((function(t){return t.app.isInitialized})),E=Object(Z.c)((function(t){return t.auth.isLoggedIn}));Object(a.useEffect)((function(){c(G())}),[]);var S=Object(a.useCallback)((function(){Ft.push("/login")}),[]),b=Object(a.useCallback)((function(){c((function(t){t(R("loading")),A().then((function(e){0===e.data.resultCode?(t(k(!1)),t(R("succeeded"))):D(e.data,t)})).catch((function(e){L(e,t)}))}))}),[]);return o?r.a.createElement("div",{className:"App"},r.a.createElement(At,null),r.a.createElement(s.a,{position:"static"},r.a.createElement(d.a,null,r.a.createElement(f.a,{variant:"h6"},"TODOLISTS"),!E&&r.a.createElement(m.a,{color:"inherit",onClick:S},"Login"),E&&r.a.createElement(m.a,{color:"inherit",onClick:b},"Log out")),"loading"===i&&r.a.createElement(O.a,null)),r.a.createElement(T.a,{fixed:!0},r.a.createElement(pt.d,null,r.a.createElement(pt.b,{path:"/",exact:!0,render:function(){return r.a.createElement(jt,{demo:n})}}),r.a.createElement(pt.b,{path:"/login",render:function(){return r.a.createElement(kt,null)}}),r.a.createElement(pt.b,{path:"/404",render:function(){return r.a.createElement("h1",null,"404: PAGE NOT FOUND")}}),r.a.createElement(pt.b,{path:"*",render:function(){return r.a.createElement(pt.a,{to:"/404"})}})))):r.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},r.a.createElement(u.a,null))},wt=n(43),Rt=n(92),Kt=Object(wt.c)({todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case N.REMOVE_TODOLIST:return t.filter((function(t){return t.id!==e.id}));case N.ADD_TODOLIST:return[Object(E.a)(Object(E.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(S.a)(t));case N.CHANGE_TODOLIST_TITLE:return t.map((function(t){return t.id===e.id?Object(E.a)(Object(E.a)({},t),{},{title:e.title}):t}));case N.CHANGE_TODOLIST_FILTER:return t.map((function(t){return t.id===e.id?Object(E.a)(Object(E.a)({},t),{},{filter:e.filter}):t}));case N.SET_TODOLISTS:return e.todolists.map((function(t){return Object(E.a)(Object(E.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case N.CHANGE_TODOLIST_ENTITY_STATUS:return t.map((function(t){return t.id===e.id?Object(E.a)(Object(E.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ct.SET_TASKS:return Object(E.a)(Object(E.a)({},t),{},Object(rt.a)({},e.todolistId,e.tasks.map((function(t){return Object(E.a)(Object(E.a)({},t),{},{entityStatus:"idle"})}))));case ct.REMOVE_TASK:return Object(E.a)(Object(E.a)({},t),{},Object(rt.a)({},e.todoListID,t[e.todoListID].filter((function(t){return t.id!==e.taskID}))));case ct.ADD_TASK:return Object(E.a)(Object(E.a)({},t),{},Object(rt.a)({},e.task.todoListId,[Object(E.a)(Object(E.a)({},e.task),{},{entityStatus:"idle"})].concat(Object(S.a)(t[e.task.todoListId]))));case ct.UPDATE_TASK:return Object(E.a)(Object(E.a)({},t),{},Object(rt.a)({},e.todoListID,t[e.todoListID].map((function(t){return t.id===e.taskID?Object(E.a)(Object(E.a)({},t),e.domainModel):t}))));case ct.CHANGE_TASK_ENTITY_STATUS:return Object(E.a)(Object(E.a)({},t),{},Object(rt.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.id?Object(E.a)(Object(E.a)({},t),{},{entityStatus:e.status}):t}))));case N.ADD_TODOLIST:return Object(E.a)(Object(E.a)({},t),{},Object(rt.a)({},e.todolist.id,[]));case N.REMOVE_TODOLIST:var n=e.id,a=(t[n],Object(l.a)(t,[n].map(at.a)));return Object(E.a)({},a);case N.SET_TODOLISTS:var r=Object(E.a)({},t);return e.todolists.forEach((function(t){r[t.id]=[]})),r;default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y.SET_STATUS:return Object(E.a)(Object(E.a)({},t),{},{status:e.status});case y.SET_ERROR:return Object(E.a)(Object(E.a)({},t),{},{error:e.error});case y.SET_IS_INITIALIZED:return Object(E.a)(Object(E.a)({},t),{},{isInitialized:e.isInitialized});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case o.SET_IS_LOGGED_IN:return Object(E.a)(Object(E.a)({},t),{},{isLoggedIn:e.value});default:return t}}}),Gt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose,Pt=Object(wt.d)(Kt,Gt(Object(wt.a)(Rt.a)));window.store=Pt;var Ut=n(93),Ht=n.n(Ut),Mt=n(48),Ft=Ht()();i.a.render(r.a.createElement(Z.a,{store:Pt},r.a.createElement(Mt.a,null,r.a.createElement(Nt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[111,1,2]]]);
//# sourceMappingURL=main.b143b1e0.chunk.js.map